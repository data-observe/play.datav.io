import{a as E,C as z}from"./index-9076ce45.js";import{r as s,ar as M,dd as d,bk as m,dl as N,eW as V,Y as C,c0 as k,bU as x,au as w,V as o,aP as T,ay as L}from"./index-3a76b207.js";import"./useLandscapeMode-e7a72966.js";const F=s.memo(t=>{const{panel:e,height:f,width:b}=t,[p,y]=s.useState(null),{colorMode:u}=M(),i=s.useMemo(()=>{let a=[];if(t.data.length>0){for(const h of t.data)for(const g of h)g.name==e.plugins.gauge.diisplaySeries&&a.push(g);a.length==0&&a.push(t.data[0][0])}if(a.length==0)return[];const n=d(a[0],t.panel.plugins.gauge.value.calc),r=m(t.panel.plugins.gauge.title.display)?a[0].name:N(t.panel.plugins.gauge.title.display,{[V]:a[0].name}),c=e.plugins.gauge.value.min??d(a[0],C.Min),l=e.plugins.gauge.value.max??d(a[0],C.Max);return[{name:r,value:n,min:c,max:l}]},[t.data,t.panel.plugins.gauge.value,t.panel.plugins.gauge.title.display,t.panel.plugins.gauge.diisplaySeries]),v=s.useMemo(()=>{var r,c;const a=e.plugins.gauge.thresholds;let n=[];if(m(a))n=[[1,k[0]]];else for(let l=a.thresholds.length-1;l>=0;l--){const h=a.thresholds[l];if(l==0){n.push([1,x(h.color,u)]);continue}else{const g=a.thresholds[l-1];n.push([a.mode==E.Percentage?g.value/100:(g.value-i[0].min)/(i[0].max-i[0].min),x(h.color,u)])}}return{animation:e.plugins.gauge.animation,grid:{left:"0%",right:"0%",width:"100%",padding:0},series:[{type:"gauge",radius:"100%",title:{show:e.plugins.gauge.title.show,fontSize:e.plugins.gauge.title.fontSize,offsetCenter:[e.plugins.gauge.title.left,e.plugins.gauge.title.top],color:"inherit"},detail:{show:e.plugins.gauge.value.show,valueAnimation:!0,formatter:l=>`${w.round(l,e.plugins.gauge.value.decimal)}${e.plugins.gauge.value.unit}`,color:"inherit",fontSize:e.plugins.gauge.value.fontSize,offsetCenter:[e.plugins.gauge.value.left,e.plugins.gauge.value.top],borderRadius:3},axisLine:{lineStyle:{width:e.plugins.gauge.axis.width,color:n}},axisTick:{show:e.plugins.gauge.axis.showTicks,splitNumber:5,length:6,distance:10},anchor:{show:!0,showAbove:!0,size:18,itemStyle:{color:"#FAC858"}},pointer:{icon:"path://M2.9,0.7L2.9,0.7c1.4,0,2.6,1.2,2.6,2.6v115c0,1.4-1.2,2.6-2.6,2.6l0,0c-1.4,0-2.6-1.2-2.6-2.6V3.3C0.3,1.9,1.4,0.7,2.9,0.7z",width:e.plugins.gauge.pointer.width,length:e.plugins.gauge.pointer.length,offsetCenter:[0,"8%"],itemStyle:{color:"inherit"}},data:i,min:(r=i[0])==null?void 0:r.min,max:(c=i[0])==null?void 0:c.max,splitLine:e.plugins.gauge.scale.enable&&e.plugins.gauge.scale.splitNumber>0?{length:10,lineStyle:{width:1}}:null,axisLabel:{color:"inherit",distance:14,fontSize:e.plugins.gauge.scale.fontSize,show:e.plugins.gauge.scale.enable&&e.plugins.gauge.scale.splitNumber>0,formatter:l=>`${w.round(l,e.plugins.gauge.value.decimal)}${e.plugins.gauge.value.unit}`},splitNumber:e.plugins.gauge.scale.splitNumber}]}},[e.plugins.gauge,u]);s.useEffect(()=>{p&&p.setOption({series:[{data:i}]})},[p,i]);const S=s.useCallback(a=>{y(a)},[]);return o.createElement(o.Fragment,null,m(t.data)?o.createElement(T,{height:"100%"},"No data"):v&&o.createElement(L,{height:f,key:u,className:"echarts-panel"},o.createElement(z,{options:v,theme:u,width:b,height:f,onChartCreated:S,onChartEvents:null})))});export{F as default};
