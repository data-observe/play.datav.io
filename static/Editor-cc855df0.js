import{ds as p,r as A,a3 as y,V as t,c5 as o,ax as g,b3 as b,bl as m,cx as w,b9 as F,ac as S,X as i,cy as L,dK as k,ao as C,ha as x}from"./index-3a76b207.js";import{H as h,I as n,a9 as f,M,L as E,aa as N,ab as P,ac as v,ad as R}from"./index-9076ce45.js";import{C as T}from"./ClickActionsEditor-c78e2fd4.js";import"./useLandscapeMode-e7a72966.js";const G=[p.Prometheus,p.Loki,p.TestData,p.ExternalHttp],Q=A.memo(u=>{const{panel:l,onChange:s}=u,c=y(C);return t.createElement(t.Fragment,null,t.createElement(h,{title:c.basic},t.createElement(n,{title:"View mode"},t.createElement(o,{options:[{label:"List",value:"list"},{label:"Stat",value:"stat"}],value:l.plugins.alert.viewMode,onChange:a=>s(e=>{e.plugins.alert.viewMode=a,g(f+e.id)})})),l.plugins.alert.viewMode==="stat"&&t.createElement(t.Fragment,null,t.createElement(n,{title:"Show stat graph"},t.createElement(b,{isChecked:l.plugins.alert.stat.showGraph,onChange:a=>s(e=>{e.plugins.alert.stat.showGraph=a.target.checked})})),t.createElement(n,{title:"Stat color"},t.createElement(M,{color:l.plugins.alert.stat.color,onChange:a=>s(e=>{e.plugins.alert.stat.color=a}),circlePicker:!0})),t.createElement(n,{title:"Stat layout"},t.createElement(o,{options:Object.keys(E).map(a=>({label:E[a],value:E[a]})),value:l.plugins.alert.stat.layout,onChange:a=>s(e=>{e.plugins.alert.stat.layout=a})})),t.createElement(n,{title:"Stat color mode"},t.createElement(o,{options:[{label:"Value",value:"value"},{label:"Background",value:"bg-solid"},{label:"Background gradient",value:"bg-gradient"}],value:l.plugins.alert.stat.colorMode,onChange:a=>s(e=>{e.plugins.alert.stat.colorMode=a})})),t.createElement(n,{title:"Stat graph style"},t.createElement(o,{options:[{label:"Lines",value:"lines"},{label:"Bars",value:"bars"}],value:l.plugins.alert.stat.style,onChange:a=>s(e=>{e.plugins.alert.stat.style=a})})),t.createElement(n,{title:"Stat name"},t.createElement(m,{value:l.plugins.alert.stat.statName,onChange:a=>s(e=>{e.plugins.alert.stat.statName=a,g(w+e.id)})}))),t.createElement(n,{title:"Order by"},t.createElement(o,{options:[{label:"Newest First",value:"newest"},{label:"Oldest First",value:"oldest"}],value:l.plugins.alert.orderBy,onChange:a=>s(e=>{e.plugins.alert.orderBy=a})}))),t.createElement(h,{title:"Toolbar"},t.createElement(n,{title:"Show",desc:"Show toolbar in upper right corner"},t.createElement(b,{isChecked:l.plugins.alert.toolbar.show,onChange:a=>s(e=>{e.plugins.alert.toolbar.show=a.target.checked})})),t.createElement(n,{title:"Toolbar width",desc:"In css pixels"},t.createElement(F,{min:0,max:500,step:20,value:l.plugins.alert.toolbar.width,onChange:a=>s(e=>{e.plugins.alert.toolbar.width=a})})),t.createElement(n,{title:"Reset toolbar options"},t.createElement(S,{size:"sm",onClick:()=>g(N+l.id)},"Reset toolbar options"))),t.createElement(B,{panel:l,filter:l.plugins.alert.filter,onChange:s}),t.createElement(h,{title:"Chart"},t.createElement(n,{title:"Show"},t.createElement(b,{isChecked:l.plugins.alert.chart.show,onChange:a=>s(e=>{e.plugins.alert.chart.show=a.target.checked})})),t.createElement(n,{title:"Chart height",desc:"Css style height"},t.createElement(m,{value:l.plugins.alert.chart.height,onChange:a=>s(e=>{e.plugins.alert.chart.height=a,g(w+e.id)}),placeholder:"e.g 200px 30%"})),t.createElement(n,{title:"Show label",desc:"Value label display on bars"},t.createElement(o,{options:[{label:"Auto",value:"auto"},{label:"Always",value:"always"},{label:"None",value:"none"}],value:l.plugins.alert.chart.showLabel,onChange:a=>s(e=>{e.plugins.alert.chart.showLabel=a})})),t.createElement(n,{title:"Stack"},t.createElement(o,{options:[{label:"Auto",value:"auto"},{label:"Always",value:"always"},{label:"None",value:"none"}],value:l.plugins.alert.chart.stack,onChange:a=>s(e=>{e.plugins.alert.chart.stack=a})})),t.createElement(n,{title:"Tooltip"},t.createElement(o,{options:[{label:"Single",value:"single"},{label:"All",value:"all"},{label:"None",value:"none"}],value:l.plugins.alert.chart.tooltip,onChange:a=>s(e=>{e.plugins.alert.chart.tooltip=a})}))),t.createElement(h,{title:c.interaction},t.createElement(T,{panel:l,onChange:a=>{s(e=>{e.plugins.alert.clickActions=a})},actions:l.plugins.alert.clickActions})))}),B=({panel:u,filter:l,onChange:s})=>{const c=y(x),a=y(C);return t.createElement(h,{title:c.alertFilter},t.createElement(n,{title:"Enable"},t.createElement(b,{isChecked:l.enableFilter,onChange:e=>{const r=e.currentTarget.checked;s(d=>{switch(d.type){case i.Alert:d.plugins.alert.filter.enableFilter=r;break;case i.Graph:d.plugins.graph.alertFilter.enableFilter=r;break}})}})),t.createElement(n,{title:c.alertState},t.createElement(P,{options:Object.keys(v).map(e=>({label:v[e],value:v[e]})),value:l.state,onChange:e=>s(r=>{switch(r.type){case i.Alert:r.plugins.alert.filter.state=e;break;case i.Graph:r.plugins.graph.alertFilter.state=e;break}})})),t.createElement(n,{title:a.datasource,desc:c.datasourceTips},t.createElement(L,{style:{minWidth:"300px"},value:l.datasources,allowClear:!0,mode:"multiple",options:k.filter(e=>G.includes(e.type)).map(e=>({label:e.name,value:e.id})),onChange:e=>{s(r=>{switch(r.type){case i.Alert:r.plugins.alert.filter.datasources=e;break;case i.Graph:r.plugins.graph.alertFilter.datasources=e;break}}),g(w+u.id)}})),l.datasources.find(e=>k.find(r=>r.id==e).type==p.ExternalHttp)&&t.createElement(R,{panel:u,datasource:u.datasource,onChange:e=>s(r=>{switch(r.type){case i.Alert:r.plugins.alert.filter.httpQuery=e;break;case i.Graph:r.plugins.graph.alertFilter.httpQuery=e;break}}),query:l.httpQuery}),t.createElement(n,{title:"Rule name",desc:"Filter for alert rules containing this text"},t.createElement(m,{value:l.ruleName,onChange:e=>s(r=>{switch(r.type){case i.Alert:r.plugins.alert.filter.ruleName=e;break;case i.Graph:r.plugins.graph.alertFilter.ruleName=e;break}}),placeholder:"support multi regex, separate with comman e.g: ^service1, ^service2"})),t.createElement(n,{title:"Rule labels",desc:'Filter rule labels using label querying, e.g: {severity="critical"}'},t.createElement(m,{value:l.ruleLabel,onChange:e=>s(r=>{switch(r.type){case i.Alert:r.plugins.alert.filter.ruleLabel=e;break;case i.Graph:r.plugins.graph.alertFilter.ruleLabel=e;break}}),placeholder:""})),t.createElement(n,{title:"Alert label",desc:'Filter alert labels using label querying, e.g: {service="api-gateway", instance=~"cluster-cn-.+"}'},t.createElement(m,{value:l.alertLabel,onChange:e=>s(r=>{switch(r.type){case i.Alert:r.plugins.alert.filter.alertLabel=e;break;case i.Graph:r.plugins.graph.alertFilter.alertLabel=e;break}}),placeholder:""})))};export{B as AlertFilterEditor,Q as default};
