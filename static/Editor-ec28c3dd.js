import{r as C,df as f,V as l,a3 as k,b3 as m,b9 as y,c5 as i,cy as E,bl as v,ax as x,cx as T,bk as B,ay as L,ac as z,aQ as w,ab as I,aS as V,aN as W,cu as A,ao as F,ct as M,_ as S,au as P}from"./index-3a76b207.js";import{H as u,I as o,L as b,M as d}from"./index-9076ce45.js";import"./useLandscapeMode-e7a72966.js";const R=C.memo(c=>{var r;const{panel:n,onChange:a}=c,g=((r=c.data)==null?void 0:r.flat())??[];if(f(g))return l.createElement(l.Fragment,null);const p=C.useMemo(()=>{const e=new Set;return g.forEach(t=>{t.labels&&Object.keys(t.labels).forEach(s=>{e.add(s)})}),Array.from(e).sort()},[c.data]),h=k(F);return l.createElement(l.Fragment,null,l.createElement(u,{title:h.basicSetting},l.createElement(o,{title:"Show time"},l.createElement(m,{isChecked:n.plugins.log.showTime,onChange:e=>a(t=>{t.plugins.log.showTime=e.target.checked})})),l.createElement(o,{title:"Timestamp column width",desc:"In css pixels"},l.createElement(y,{min:0,max:500,step:5,value:n.plugins.log.timeColumnWidth,onChange:e=>a(t=>{t.plugins.log.timeColumnWidth=e}),placeholder:"auto"})),l.createElement(o,{title:"Order by"},l.createElement(i,{options:[{label:"Newest First",value:"newest"},{label:"Oldest First",value:"oldest"}],value:n.plugins.log.orderBy,onChange:e=>a(t=>{t.plugins.log.orderBy=e})})),l.createElement(o,{title:"Timestamp precision"},l.createElement(E,{value:n.plugins.log.timeStampPrecision,onChange:e=>a(t=>{t.plugins.log.timeStampPrecision=e}),options:[{label:"ns",value:"ns"},{label:"us",value:"us"},{label:"ms",value:"ms"},{label:"second",value:"s"}],popupMatchSelectWidth:!1}))),l.createElement(u,{title:"Labels"},l.createElement(o,{title:"Display labels"},l.createElement(E,{mode:"multiple",value:n.plugins.log.labels.display,options:p.map(e=>({label:e,value:e})),onChange:e=>a(t=>{t.plugins.log.labels.display=e}),popupMatchSelectWidth:!1,style:{width:"100%"},placeholder:"select labels..",allowClear:!0,showSearch:!0})),l.createElement(o,{title:"Label column width",desc:"In css pixels"},l.createElement(y,{min:0,max:1e3,step:5,value:n.plugins.log.labels.width,onChange:e=>a(t=>{t.plugins.log.labels.width=e}),placeholder:"auto"})),l.createElement(o,{title:"Layout orientation"},l.createElement(i,{options:[{label:b.Horizontal,value:b.Horizontal},{label:b.Vertical,value:b.Vertical}],value:n.plugins.log.labels.layout,onChange:e=>a(t=>{t.plugins.log.labels.layout=e})}))),l.createElement(u,{title:h.styles},l.createElement(o,{title:"Sync label color",desc:"Use the same label name color from Chart"},l.createElement(m,{isChecked:n.plugins.log.styles.labelColorSyncChart,onChange:e=>a(t=>{t.plugins.log.styles.labelColorSyncChart=e.target.checked})})),!n.plugins.log.styles.labelColorSyncChart&&l.createElement(o,{title:"Label name color"},l.createElement(d,{color:n.plugins.log.styles.labelColor,onChange:e=>a(t=>{t.plugins.log.styles.labelColor=e})})),l.createElement(o,{title:"Label value color"},l.createElement(d,{color:n.plugins.log.styles.labelValueColor,onChange:e=>a(t=>{t.plugins.log.styles.labelValueColor=e})})),l.createElement(o,{title:"Content color"},l.createElement(d,{color:n.plugins.log.styles.contentColor,onChange:e=>a(t=>{t.plugins.log.styles.contentColor=e})})),l.createElement(o,{title:"Font size",desc:"Css style font-size"},l.createElement(v,{value:n.plugins.log.styles.fontSize,onChange:e=>a(t=>{t.plugins.log.styles.fontSize=e}),placeholder:"e.g 1rem, 16px"})),l.createElement(o,{title:"Wrap line",desc:"Css style word-break"},l.createElement(i,{options:[{label:"Break All",value:"break-all"},{label:"Break Word",value:"break-word"}],value:n.plugins.log.styles.wordBreak,onChange:e=>a(t=>{t.plugins.log.styles.wordBreak=e})})),l.createElement(o,{title:"Line border"},l.createElement(m,{isChecked:n.plugins.log.styles.showlineBorder,onChange:e=>a(t=>{t.plugins.log.styles.showlineBorder=e.target.checked})}))),l.createElement(u,{title:"Toolbar"},l.createElement(o,{title:"Show",desc:"Show toolbar in upper right corner"},l.createElement(m,{isChecked:n.plugins.log.toolbar.show,onChange:e=>a(t=>{t.plugins.log.toolbar.show=e.target.checked})})),l.createElement(o,{title:"Toolbar width",desc:"In css pixels"},l.createElement(y,{min:0,max:500,step:20,value:n.plugins.log.toolbar.width,onChange:e=>a(t=>{t.plugins.log.toolbar.width=e})}))),l.createElement(u,{title:"Chart"},l.createElement(o,{title:"Show"},l.createElement(m,{isChecked:n.plugins.log.chart.show,onChange:e=>a(t=>{t.plugins.log.chart.show=e.target.checked})})),l.createElement(o,{title:"Chart height",desc:"Css style width"},l.createElement(v,{value:n.plugins.log.chart.height,onChange:e=>a(t=>{t.plugins.log.chart.height=e,x(T+t.id)}),placeholder:"e.g 200px 30%"})),l.createElement(o,{title:"Show label",desc:"Value label display on bars"},l.createElement(i,{options:[{label:"Auto",value:"auto"},{label:"Always",value:"always"},{label:"None",value:"none"}],value:n.plugins.log.chart.showLabel,onChange:e=>a(t=>{t.plugins.log.chart.showLabel=e})})),l.createElement(o,{title:"Stack"},l.createElement(i,{options:[{label:"Auto",value:"auto"},{label:"Always",value:"always"},{label:"None",value:"none"}],value:n.plugins.log.chart.stack,onChange:e=>a(t=>{t.plugins.log.chart.stack=e})})),l.createElement(o,{title:"Tooltip"},l.createElement(i,{options:[{label:"Single",value:"single"},{label:"All",value:"all"},{label:"None",value:"none"}],value:n.plugins.log.chart.tooltip,onChange:e=>a(t=>{t.plugins.log.chart.tooltip=e})}))),l.createElement(u,{title:"Thresholds"},l.createElement(N,{labels:p,value:n.plugins.log.thresholds,onChange:e=>a(t=>{t.plugins.log.thresholds=e})})))}),N=c=>{const n=k(M),[a,g]=C.useState(c.value);if(B(a)){const e=[],t="inherit";e.push({color:t,value:null,type:null}),g(e);return}const p=()=>{const e=S[a.length%S.length];a.unshift({type:"label",key:null,value:null,color:e}),r(a)},h=e=>{a.splice(e,1),r(a)},r=e=>{const t=P.cloneDeep(e);g(t),c.onChange(t)};return l.createElement(L,null,l.createElement(z,{onClick:p,width:"100%",size:"sm",colorScheme:"gray"},"+ ",n.addThreshold),l.createElement(w,{fontSize:"0.8rem",textStyle:"annotation",mt:"2"},"When target is matched, color of Timestamp will change"),l.createElement(I,{alignItems:"left",mt:"2"},a==null?void 0:a.map((e,t)=>l.createElement(V,{key:e.color+e.key+e.type+e.value+t,justifyContent:"space-between",alignItems:"center"},l.createElement(W,{spacing:1},l.createElement(d,{color:e.color,onChange:s=>{a[t].color=s,r(a)},circlePicker:!0}),e.type!==null&&l.createElement(E,{value:e.type,onChange:s=>{a[t].type=s,r(a)},style:{width:"100px"},showSearch:!0,options:[{label:"Label",value:"label"},{label:"Content",value:"content"}],popupMatchSelectWidth:!1}),e.type=="label"&&l.createElement(E,{value:e.key,onChange:s=>{a[t].key=s,r(a)},style:{width:"120px"},showSearch:!0,options:c.labels.map(s=>({label:s,value:s})),placeholder:"select label",popupMatchSelectWidth:!1}),e.type!==null&&l.createElement(v,{value:e.value,onChange:s=>{a[t].value=s,r(a)},placeholder:"match value.."}),e.type===null&&l.createElement(w,{pl:"1",fontSize:"0.95rem"},"Base")),e.type!==null&&l.createElement(A,{opacity:.6,fontSize:"0.8rem",onClick:()=>h(t)})))))};export{R as default};
